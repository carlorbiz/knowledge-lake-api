# Agent Knowledge Lake Access - AAE Unified Memory System## Architecture Overview**Knowledge Lake Location**: `http://192.168.68.61:8000` (Production) | `http://localhost:8000` (Local)**Purpose**: Centralized shared memory system enabling cross-agent knowledge transfer, workflow state persistence, and multi-agent collaboration within Carla's AI Automation Ecosystem (AAE).## Current Knowledge Lake API Endpoints### 1. Search Knowledge```GET /knowledge/search?query={query}&user_id={agent_id}&limit={limit}```**Purpose**: Query shared knowledge base for relevant context**Parameters**:- `query` (required): Search query string- `user_id` (optional): Agent identifier (defaults to 'carla_knowledge_lake')- `limit` (optional): Number of results (default: 10)**Example**:```bashcurl "http://192.168.68.61:8000/knowledge/search?query=course+architecture&user_id=fred&limit=5"```### 2. Add Knowledge```POST /knowledge/addContent-Type: application/json```**Purpose**: Add new knowledge/memory to shared lake**Body**:```json{  "content": "Knowledge content or conversation history",  "user_id": "agent_name",  "metadata": {    "type": "agent_insight",    "task_id": "task_123",    "timestamp": "2025-10-14T12:00:00"  }}```**Example**:```bashcurl -X POST "http://192.168.68.61:8000/knowledge/add" \  -H "Content-Type: application/json" \  -d '{    "content": "Completed audience analysis for RN aged care course",    "user_id": "fred",    "metadata": {"task": "research", "course_id": "123"}  }'```### 3. Get Topic Context```GET /knowledge/context/{topic}```**Purpose**: Retrieve focused context for specific topic**Parameters**:- `topic` (required): Topic identifier**Example**:```bashcurl "http://192.168.68.61:8000/knowledge/context/medication-management"```### 4. Health Check```GET /health```**Purpose**: Verify Knowledge Lake is running**Response**: `{"status": "healthy", "service": "mem0_knowledge_lake"}`---## Agent Access Methods & Integration### Claude Code (YOU!)**Access Method**: Direct MCP + API calls**Integration**: Native via tools**Capabilities**:- Direct Mem0 library integration- API endpoint access via Bash/curl- Orchestrate multi-agent workflows- Maintain conversation state**Usage Pattern**:```python# Via API from within orchestrationcurl -X POST "http://192.168.68.61:8000/knowledge/add" \  -d '{"content": "Task assignment", "user_id": "claude_code"}'```---### Grok (xAI)**Access Method**: API via n8n webhooks**Current Status**: Needs n8n HTTP Request node configuration**Recommended Integration**:**n8n Workflow Pattern**:1. Grok receives task via webhook2. HTTP Request node: GET `/knowledge/search?query=task_context&user_id=grok`3. Grok processes with context4. HTTP Request node: POST `/knowledge/add` with Grok's insights5. Trigger next workflow step**Agent Strengths** (from Notion DB):- System architecture analysis- Risk identification- Unconventional problem-solving- Integration troubleshooting**Optimal Prompt**:> "Analyze this complex system architecture and identify non-obvious integration risks, edge cases, and potential failure modes. Focus on: 1) Real-time processing bottlenecks, 2) Data consistency across distributed systems, 3) Scalability limits, 4) Security vulnerabilities in API chains."**n8n Configuration**:```json{  "nodes": [    {      "name": "Get Context from Knowledge Lake",      "type": "n8n-nodes-base.httpRequest",      "parameters": {        "url": "http://192.168.68.61:8000/knowledge/search",        "qs": {          "query": "={{$json.task_description}}",          "user_id": "grok",          "limit": 5        }      }    },    {      "name": "Add Grok Insights to Knowledge Lake",      "type": "n8n-nodes-base.httpRequest",      "parameters": {        "method": "POST",        "url": "http://192.168.68.61:8000/knowledge/add",        "body": {          "content": "={{$json.grok_analysis}}",          "user_id": "grok",          "metadata": {            "task_type": "architecture_analysis",            "timestamp": "={{$now}}"          }        }      }    }  ]}```---### Manus (Documentation Agent)**Access Method**: API via n8n webhooks**Current Status**: Needs n8n HTTP Request node configuration**Recommended Integration**: Same pattern as Grok**Agent Strengths**:- Technical documentation- API specification- System traceability- Error handling procedures**Optimal Prompt**:> "Conduct a comprehensive documentation audit. Provide: 1) Complete API endpoint inventory with schemas, 2) Data flow diagrams, 3) Dependency mapping with version tracking, 4) Error handling documentation, 5) Integration testing checklist."**Knowledge Lake Usage**:- Query for existing documentation: `/knowledge/search?query=api+documentation&user_id=manus`- Add specification updates: POST `/knowledge/add` with documentation artifacts---### Fred (Research Agent)**Access Method**: API via n8n webhooks**Current Status**: Needs n8n HTTP Request node configuration**Recommended Integration**: Same pattern as Grok + academic database integration**Agent Strengths**:- Academic research- Evidence synthesis- Regulatory compliance (AHPRA/NMBA)- Citation management**Optimal Prompt**:> "Perform deep research with academic rigor. Synthesize: 1) Latest peer-reviewed research (2023-2025), 2) Industry best practices, 3) Regulatory compliance requirements, 4) Emerging trends. Provide citations, compare methodologies, deliver evidence-based recommendations."**Knowledge Lake Usage**:- Store research findings: POST with metadata `{"type": "research", "citations": [...]}`- Query existing research: `/knowledge/search?query=evidence+base&user_id=fred`- Enable other agents to access Fred's research without re-running queries---### Penny (Content Creation Agent)**Access Method**: API via n8n webhooks**Current Status**: Needs n8n HTTP Request node configuration**Recommended Integration**: Same pattern + visual asset tracking**Agent Strengths**:- Content transformation- Educational design- Visual content suggestions- Multi-format adaptation**Optimal Prompt**:> "Transform this technical/educational content into engaging material. Create: 1) Compelling narrative arc, 2) Real-world examples, 3) Visual content suggestions, 4) Interactive elements, 5) Multi-format adaptation (slides, scripts, handouts)."**Knowledge Lake Usage**:- Access research from Fred: `/knowledge/search?query=course+research&user_id=penny`- Store content drafts: POST with `{"type": "content_draft", "format": "slides"}`- Enable version tracking of content iterations---### Gemini (Multimodal Agent)**Access Method**: API via n8n webhooks OR Google AI Studio integration**Current Status**: Needs n8n HTTP Request node configuration**Recommended Integration**: Same pattern + image/diagram analysis**Agent Strengths**:- Multimodal analysis- Visual intelligence- Code optimization- Accessibility recommendations**Optimal Prompt**:> "Analyze this content across multiple modalities. Provide: 1) Visual analysis with accessibility recommendations, 2) Code analysis with optimizations, 3) Cross-reference documentation for consistency gaps, 4) Generate complementary visual assets, 5) Multi-language code examples."**Knowledge Lake Usage**:- Store visual analysis: POST with `{"type": "visual_analysis", "diagrams": [...]}`- Query for multimodal context: `/knowledge/search?query=architecture+diagram&user_id=gemini`---## Unified n8n Workflow Template for All Agents### Template: "Agent Knowledge Lake Integration"**Workflow Structure**:```1. Webhook Trigger (agent-specific)   ↓2. Get Context from Knowledge Lake (HTTP Request)   ↓3. Process with Agent-Specific Logic (Function/HTTP to external API)   ↓4. Add Agent Output to Knowledge Lake (HTTP Request)   ↓5. Trigger Next Agent OR Update Notion Status```**Reusable HTTP Request Nodes**:**Node A: Get Context**```json{  "name": "Get Knowledge Lake Context",  "type": "n8n-nodes-base.httpRequest",  "parameters": {    "method": "GET",    "url": "http://192.168.68.61:8000/knowledge/search",    "qs": {      "query": "={{$json.task_description}}",      "user_id": "={{$json.agent_name}}",      "limit": 10    }  }}```**Node B: Add Insights**```json{  "name": "Add to Knowledge Lake",  "type": "n8n-nodes-base.httpRequest",  "parameters": {    "method": "POST",    "url": "http://192.168.68.61:8000/knowledge/add",    "body": {      "content": "={{$json.agent_output}}",      "user_id": "={{$json.agent_name}}",      "metadata": {        "task_id": "={{$json.task_id}}",        "agent_role": "={{$json.agent_role}}",        "timestamp": "={{$now}}",        "workflow": "={{$workflow.name}}"      }    },    "options": {      "bodyContentType": "json"    }  }}```---## Implementation Roadmap### Phase 1: Foundation (THIS WEEK)- [x] Document all agent access patterns- [x] Define agent prompts and strengths- [ ] Create n8n workflow templates for each agent- [ ] Test Knowledge Lake connectivity from n8n- [ ] Add agent profiles to Knowledge Lake via API### Phase 2: Integration (NEXT WEEK)- [ ] Build n8n workflows for each agent (Grok, Manus, Fred, Penny, Gemini)- [ ] Implement webhook endpoints for agent communication- [ ] Test bi-directional knowledge flow (read from lake → process → write back)- [ ] Create agent-to-agent handoff workflows### Phase 3: Cross-Pollination (WEEK 3)- [ ] Enable multi-agent collaboration workflows- [ ] Implement task routing based on agent strengths- [ ] Build knowledge graph visualization- [ ] Create agent performance analytics### Phase 4: Advanced Features (MONTH 2)- [ ] Implement conflict resolution for concurrent updates- [ ] Add version control for knowledge entries- [ ] Build agent recommendation engine- [ ] Create automated workflow optimization---## Quick Start: Add Your First Agent to Knowledge Lake### Step 1: Test Knowledge Lake Connectivity```bashcurl http://192.168.68.61:8000/health```Expected: `{"status": "healthy", "service": "mem0_knowledge_lake"}`### Step 2: Add Agent Profile```bashcurl -X POST "http://192.168.68.61:8000/knowledge/add" \  -H "Content-Type: application/json" \  -d '{    "content": "Agent: Fred | Role: Research | Strengths: Academic research, evidence synthesis, AHPRA/NMBA compliance",    "user_id": "system",    "metadata": {      "type": "agent_profile",      "agent_id": "fred",      "timestamp": "2025-10-14T12:00:00"    }  }'```### Step 3: Create n8n Workflow for Agent1. Open n8n: http://localhost:56782. Import template from `AGENT_KNOWLEDGE_LAKE_ACCESS.md`3. Configure webhook URL: `/webhook/{agent-name}-knowledge-integration`4. Test with sample task### Step 4: Verify Cross-Agent Access```bash# Add knowledge as Fredcurl -X POST "http://192.168.68.61:8000/knowledge/add" \  -d '{"content": "Research complete on medication safety", "user_id": "fred"}'# Query as Penny (accessing Fred's research)curl "http://192.168.68.61:8000/knowledge/search?query=medication+safety&user_id=penny"```---## Security Considerations- **API Key**: Currently no authentication (internal network only)- **Future**: Implement JWT tokens for agent authentication- **Network**: Knowledge Lake accessible only within local network (192.168.68.x)- **Data Privacy**: All data stored locally, no external API calls for memory storage---## Troubleshooting### Knowledge Lake Not Responding```bash# Check if server is runningcurl http://192.168.68.61:8000/health# Check Python processps aux | grep api_server.py# Restart Knowledge Lakecd C:\Users\carlo\Development\mem0-sync\mem0python api_server.py```### n8n Can't Reach Knowledge Lake1. Verify n8n is running: http://localhost:56782. Check network connectivity: `ping 192.168.68.61`3. Ensure firewall allows port 50004. Test with curl from n8n container: `docker exec n8n curl http://192.168.68.61:8000/health`### Agent Not Receiving Context1. Check user_id parameter matches agent identifier2. Verify knowledge was added: `curl "http://192.168.68.61:8000/knowledge/search?query=test&user_id=agent"`3. Review Mem0 embeddings are working (check OPENAI_API_KEY in .env)---## Next Steps1. **Immediate**: Run Knowledge Lake server: `python api_server.py`2. **Today**: Create first agent workflow in n8n (recommend starting with Fred)3. **This Week**: Implement all 5 agent workflows with Knowledge Lake integration4. **Ongoing**: Monitor agent interactions and optimize cross-pollination patterns---**Status**: Ready for implementation**Last Updated**: 2025-10-14**Owner**: Carla / Claude Code**Priority**: CRITICAL - Enables full AAE cross-agent collaboration