# DO THIS NOW - n8n Manus Integration Checklist

**Status**: Ready to implement ‚úÖ

---

## Step 1: Open n8n Workflow

1. Navigate to `http://localhost:5678`
2. Open your existing Slack slash command workflow
3. Make sure you can see the "Parse Slack Command" node

---

## Step 2: Create Manus API Credential (2 minutes)

**In n8n UI:**

1. Click **Settings** (gear icon)
2. Click **Credentials**
3. Click **+ Add Credential**
4. Select **Header Auth**
5. Fill in:
   - **Credential Name**: `Manus API Key`
   - **Name**: `API_KEY`
   - **Value**: `[Get from .env: N8N_RAILWAY_MANUS_API_KEY]`
6. Click **Save**

**How to get the API key:**
```bash
# In terminal:
cd C:\Users\carlo\Development\mem0-sync\mem0
type .env | findstr MANUS
```

---

## Step 3: Add IF Node (30 seconds)

**After the "Parse Slack Command" node:**

1. Click the **+** button
2. Select **IF** node
3. Name it: `Should Route to Manus?`
4. Click **Add Condition**
5. Select **Expression**
6. Paste this condition:
   ```javascript
   {{$json.command_text.length >= 1800}}
   ```
7. Save the node

**Connect it:**
- Input: From "Parse Slack Command"
- `false` output: To your existing GitHub flow
- `true` output: To next node (Call Manus API)

---

## Step 4: Add HTTP Request for Manus (1 minute)

**After the IF node (true branch):**

1. Click the **+** button on the `true` output
2. Select **HTTP Request** node
3. Name it: `Call Manus API`
4. Configure:

**Authentication:**
- Click **Add Credential**
- Select **Header Auth**
- Choose: `Manus API Key` (the credential you just created)

**Request:**
- **Method**: `POST`
- **URL**: `https://api.manus.ai/v1/tasks`

**Body:**
- **Send Body**: `On`
- **Body Content Type**: `JSON`
- **JSON/RAW Parameters**: `On`
- Click **Add Parameter**
- Add these fields:

```json
{
  "prompt": "{{$node['Parse Slack Command'].json.command_text}}",
  "taskMode": "agent"
}
```

**Note**: If `command_text` is wrong, click the expression editor and find the correct field name from Parse Slack Command output.

5. Save the node

---

## Step 5: Add Notion Node (1 minute)

**After "Call Manus API":**

1. Click the **+** button
2. Select **Notion** node
3. Name it: `Log to Notion (Manus Doc)`
4. Configure:
   - **Resource**: `Database Page`
   - **Operation**: `Create`
   - **Database ID**: `[Your AI Agent Universal Conversations Database ID]`

**Properties** (adjust based on your actual Notion database):
- **Title**: `{{$node['Parse Slack Command'].json.notion_title}}`
- **Document URL**: `{{$node['Call Manus API'].json.documentUrl}}`
- **Agent**: `Manus`
- **User**: `{{$node['Parse Slack Command'].json.user_name}}`
- **Source**: `Slack`

5. Save the node

---

## Step 6: Add Slack Response Node (1 minute)

**After "Log to Notion":**

1. Click the **+** button
2. Select **HTTP Request** node
3. Name it: `Reply to Slack (Manus Doc)`
4. Configure:

**Authentication**: `None`

**Request:**
- **Method**: `POST`
- **URL**: `{{$node['Parse Slack Command'].json.response_url}}`

**Body:**
- **Send Body**: `On`
- **Body Content Type**: `JSON`
- **JSON/RAW Parameters**: `On`

```json
{
  "response_type": "in_channel",
  "text": ":brain: Manus created your document!",
  "blocks": [
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": ":page_facing_up: *<{{$node['Call Manus API'].json.documentUrl}}|View Google Doc>*"
      }
    },
    {
      "type": "context",
      "elements": [
        {
          "type": "mrkdwn",
          "text": "Generated by Manus AI | Logged to Notion"
        }
      ]
    }
  ]
}
```

5. Save the node

---

## Step 7: Save Workflow

1. Click **Save** (top right)
2. Ensure workflow is **Active**

---

## Step 8: Test (2 minutes)

### Test 1: Short Content (GitHub Path)
```
/ai cc check system status
```

**Expected**: Goes to GitHub issue (existing flow)

### Test 2: Long Content (Manus Path)
```
/ai cc [Paste 2000+ characters of test content]
```

**Expected**:
1. Routes to Manus
2. Manus analyzes and picks template
3. Creates Google Doc
4. Returns URL to Slack
5. Logged in Notion

---

## Visual Flow Check

Your workflow should now look like this:

```
                [Parse Slack Command]
                         ‚îÇ
                         ‚îÇ
              [Should Route to Manus?]
                   ‚ï±         ‚ï≤
             false‚ï±           ‚ï≤true
                 ‚ï±             ‚ï≤
        [Format for      [Call Manus API]
         GitHub]                ‚îÇ
            ‚îÇ                   ‚îÇ
        [Create            [Log to Notion
         GitHub Issue]      (Manus Doc)]
            ‚îÇ                   ‚îÇ
        [existing           [Reply to Slack
         flow...]            (Manus Doc)]
```

---

## Common Issues

### Issue: "Cannot find field command_text"
**Fix**: In Parse Slack Command node output, find the actual field name and update all references.

### Issue: "401 Unauthorized from Manus"
**Fix**:
1. Check the API key in the credential
2. Verify header name is exactly `API_KEY` (case-sensitive)

### Issue: Notion node fails
**Fix**: Check your Notion database properties match the field names exactly.

---

## What Happens Next?

Once working:
1. Short Slack commands ‚Üí GitHub ‚Üí CC processing (as before)
2. Long Slack commands ‚Üí Manus ‚Üí Intelligent template selection ‚Üí Google Doc ‚Üí Notion
3. Manus handles ALL the complexity internally

---

## Clean Up Bloat (After Testing)

Once Manus integration works, DELETE these nodes if they exist:
- ‚ùå Any direct DocsAutomator HTTP Request nodes
- ‚ùå Multiple IF nodes for template selection
- ‚ùå "Format DocsAutomator Data" nodes
- ‚ùå Complex routing Code nodes

Keep it simple: Let Manus do the intelligence, n8n just routes and stores.

---

**Estimated Time**: 10-15 minutes
**Cost**: $0 (using existing Railway + Manus plan)
**Complexity Reduction**: 15-20 nodes ‚Üí 8 nodes

**Ready? Open n8n and start with Step 1!** üöÄ
