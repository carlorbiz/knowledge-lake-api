{  "name": "AAE Agent Knowledge Lake Integration Templates",  "description": "Reusable n8n workflow components for agent-Knowledge Lake integration",  "version": "1.0",  "templates": {    "grok_workflow": {      "name": "Grok - System Architecture Analysis with Knowledge Lake",      "webhook_path": "/webhook/grok-architecture-analysis",      "nodes": [        {          "name": "Webhook Trigger",          "type": "n8n-nodes-base.webhook",          "parameters": {            "path": "grok-architecture-analysis",            "method": "POST",            "responseMode": "lastNode"          }        },        {          "name": "Get Context from Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "GET",            "url": "http://192.168.68.61:8000/knowledge/search",            "qs": {              "query": "={{$json.system_description}}",              "user_id": "grok",              "limit": 10            }          }        },        {          "name": "Call Grok API via xAI",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "https://api.x.ai/v1/chat/completions",            "authentication": "headerAuth",            "headerAuth": {              "name": "Authorization",              "value": "Bearer {{$env.XAI_API_KEY}}"            },            "body": {              "model": "grok-beta",              "messages": [                {                  "role": "system",                  "content": "You are Grok, a system architecture analyst. Analyze complex systems and identify non-obvious integration risks, edge cases, and potential failure modes. Be brutally honest about what could go wrong."                },                {                  "role": "user",                  "content": "System: {{$json.system_description}}\n\nContext from Knowledge Lake: {{$node['Get Context from Knowledge Lake'].json.results}}\n\nProvide analysis focusing on: 1) Real-time processing bottlenecks, 2) Data consistency, 3) Scalability limits, 4) Security vulnerabilities."                }              ]            },            "options": {              "bodyContentType": "json"            }          }        },        {          "name": "Add Grok Analysis to Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "http://192.168.68.61:8000/agent/grok/insights",            "body": {              "insights": "={{$json.choices[0].message.content}}",              "task_id": "={{$node['Webhook Trigger'].json.task_id}}"            },            "options": {              "bodyContentType": "json"            }          }        },        {          "name": "Return Response",          "type": "n8n-nodes-base.respondToWebhook",          "parameters": {            "responseBody": "={{{\n  'status': 'completed',\n  'agent': 'grok',\n  'analysis': $json.insights,\n  'timestamp': $now\n}}}"          }        }      ]    },    "fred_workflow": {      "name": "Fred - Research Synthesis with Knowledge Lake",      "webhook_path": "/webhook/fred-research",      "nodes": [        {          "name": "Webhook Trigger",          "type": "n8n-nodes-base.webhook",          "parameters": {            "path": "fred-research",            "method": "POST"          }        },        {          "name": "Search Existing Research in Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "GET",            "url": "http://192.168.68.61:8000/knowledge/search",            "qs": {              "query": "={{$json.research_topic}}",              "user_id": "fred",              "limit": 15            }          }        },        {          "name": "Call Fred via Perplexity Research API",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "https://api.perplexity.ai/chat/completions",            "authentication": "headerAuth",            "headerAuth": {              "name": "Authorization",              "value": "Bearer {{$env.PERPLEXITY_API_KEY}}"            },            "body": {              "model": "sonar-pro",              "messages": [                {                  "role": "system",                  "content": "You are Fred, an academic research specialist. Perform deep research with academic rigor. Synthesize peer-reviewed research (2023-2025), industry best practices, and regulatory compliance requirements. Provide comprehensive citations and evidence-based recommendations."                },                {                  "role": "user",                  "content": "Research Topic: {{$json.research_topic}}\n\nExisting Knowledge: {{$node['Search Existing Research in Knowledge Lake'].json.results}}\n\nProvide: 1) Latest peer-reviewed research, 2) Industry standards, 3) Regulatory requirements, 4) Evidence-based recommendations with citations."                }              ],              "return_citations": true            },            "options": {              "bodyContentType": "json"            }          }        },        {          "name": "Add Fred Research to Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "http://192.168.68.61:8000/agent/fred/insights",            "body": {              "insights": "={{$json.choices[0].message.content}}",              "task_id": "={{$node['Webhook Trigger'].json.task_id}}",              "citations": "={{$json.citations}}"            },            "options": {              "bodyContentType": "json"            }          }        },        {          "name": "Handoff to Penny for Content Creation",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "http://192.168.68.61:8000/workflow/handoff",            "body": {              "from_agent": "fred",              "to_agent": "penny",              "task": "Transform research into educational content",              "context": "={{$json.insights}}",              "task_id": "={{$node['Webhook Trigger'].json.task_id}}"            },            "options": {              "bodyContentType": "json"            }          }        }      ]    },    "penny_workflow": {      "name": "Penny - Content Creation with Knowledge Lake",      "webhook_path": "/webhook/penny-content-creation",      "nodes": [        {          "name": "Webhook Trigger",          "type": "n8n-nodes-base.webhook",          "parameters": {            "path": "penny-content-creation",            "method": "POST"          }        },        {          "name": "Get Research from Fred via Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "GET",            "url": "http://192.168.68.61:8000/knowledge/search",            "qs": {              "query": "={{$json.research_topic}} agent:fred",              "user_id": "penny",              "limit": 5            }          }        },        {          "name": "Call Penny via Claude API",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "https://api.anthropic.com/v1/messages",            "authentication": "headerAuth",            "headerAuth": [              {                "name": "x-api-key",                "value": "={{$env.ANTHROPIC_API_KEY}}"              },              {                "name": "anthropic-version",                "value": "2023-06-01"              }            ],            "body": {              "model": "claude-3-5-sonnet-20241022",              "max_tokens": 4096,              "messages": [                {                  "role": "user",                  "content": "You are Penny, an educational content creator. Transform technical/research content into engaging, accessible material.\n\nResearch Foundation: {{$node['Get Research from Fred via Knowledge Lake'].json.results}}\n\nTarget Audience: {{$json.target_audience}}\n\nCreate: 1) Compelling narrative arc, 2) Real-world examples, 3) Visual content suggestions, 4) Interactive elements, 5) Multi-format content (slides, scripts, handouts)."                }              ]            },            "options": {              "bodyContentType": "json"            }          }        },        {          "name": "Add Penny Content to Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "http://192.168.68.61:8000/agent/penny/insights",            "body": {              "insights": "={{$json.content[0].text}}",              "task_id": "={{$node['Webhook Trigger'].json.task_id}}"            },            "options": {              "bodyContentType": "json"            }          }        },        {          "name": "Trigger Gamma Deck Generation",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "http://localhost:5678/webhook/deck-generation",            "body": {              "content": "={{$json.insights}}",              "task_id": "={{$node['Webhook Trigger'].json.task_id}}"            }          }        }      ]    },    "manus_workflow": {      "name": "Manus - Documentation with Knowledge Lake",      "webhook_path": "/webhook/manus-documentation",      "nodes": [        {          "name": "Webhook Trigger",          "type": "n8n-nodes-base.webhook",          "parameters": {            "path": "manus-documentation",            "method": "POST"          }        },        {          "name": "Get System Context from Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "GET",            "url": "http://192.168.68.61:8000/knowledge/search",            "qs": {              "query": "={{$json.system_name}} architecture documentation",              "user_id": "manus",              "limit": 20            }          }        },        {          "name": "Call Manus via Claude API",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "https://api.anthropic.com/v1/messages",            "authentication": "headerAuth",            "body": {              "model": "claude-3-5-sonnet-20241022",              "max_tokens": 8192,              "messages": [                {                  "role": "user",                  "content": "You are Manus, a technical documentation specialist. Create comprehensive technical specification.\n\nSystem Context: {{$node['Get System Context from Knowledge Lake'].json.results}}\n\nProvide: 1) Complete API endpoint inventory with schemas, 2) Data flow diagrams, 3) Dependency mapping, 4) Error handling documentation, 5) Integration testing checklist. Use strict technical language with code examples."                }              ]            },            "options": {              "bodyContentType": "json"            }          }        },        {          "name": "Add Documentation to Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "http://192.168.68.61:8000/agent/manus/insights",            "body": {              "insights": "={{$json.content[0].text}}",              "task_id": "={{$node['Webhook Trigger'].json.task_id}}"            },            "options": {              "bodyContentType": "json"            }          }        }      ]    },    "gemini_workflow": {      "name": "Gemini - Multimodal Analysis with Knowledge Lake",      "webhook_path": "/webhook/gemini-multimodal-analysis",      "nodes": [        {          "name": "Webhook Trigger",          "type": "n8n-nodes-base.webhook",          "parameters": {            "path": "gemini-multimodal-analysis",            "method": "POST"          }        },        {          "name": "Get Related Content from Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "GET",            "url": "http://192.168.68.61:8000/knowledge/search",            "qs": {              "query": "={{$json.content_topic}} visual diagram",              "user_id": "gemini",              "limit": 10            }          }        },        {          "name": "Call Gemini API",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent",            "authentication": "headerAuth",            "headerAuth": {              "name": "x-goog-api-key",              "value": "={{$env.GEMINI_API_KEY}}"            },            "body": {              "contents": [                {                  "parts": [                    {                      "text": "You are Gemini, a multimodal analysis specialist. Analyze content across multiple dimensions.\n\nContent: {{$json.content}}\n\nExisting Context: {{$node['Get Related Content from Knowledge Lake'].json.results}}\n\nProvide: 1) Visual analysis with accessibility recommendations, 2) Code analysis with optimizations, 3) Cross-reference documentation, 4) Generate complementary visual asset descriptions, 5) Multi-language examples if applicable."                    }                  ]                }              ]            },            "options": {              "bodyContentType": "json"            }          }        },        {          "name": "Add Gemini Analysis to Knowledge Lake",          "type": "n8n-nodes-base.httpRequest",          "parameters": {            "method": "POST",            "url": "http://192.168.68.61:8000/agent/gemini/insights",            "body": {              "insights": "={{$json.candidates[0].content.parts[0].text}}",              "task_id": "={{$node['Webhook Trigger'].json.task_id}}"            },            "options": {              "bodyContentType": "json"            }          }        }      ]    }  },  "usage_instructions": {    "step1": "Open n8n at http://localhost:5678",    "step2": "Create new workflow and copy nodes from desired template",    "step3": "Configure API keys in n8n credentials (XAI_API_KEY, ANTHROPIC_API_KEY, etc)",    "step4": "Activate workflow",    "step5": "Test with curl or Postman: POST http://localhost:5678/webhook/{agent-name}",    "step6": "Verify Knowledge Lake receives and stores agent insights"  },  "environment_variables_required": {    "XAI_API_KEY": "For Grok access via x.ai",    "PERPLEXITY_API_KEY": "For Fred research via Perplexity",    "ANTHROPIC_API_KEY": "For Penny and Manus via Claude",    "GEMINI_API_KEY": "For Gemini multimodal analysis",    "OPENAI_API_KEY": "For Knowledge Lake Mem0 embeddings"  }}